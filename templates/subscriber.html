<!doctype html>
<html>
    <body>
        <div class ='row'>
            <div style='margin-left:100px;'>
            <img src = 'https://www.niemanlab.org/images/subscribe-button.png' width="120" height="70">
            </div>
            <div style='padding-top: 20px; padding-left:20px;'><h3>SUBSCRIBER</h3></div>
        </div> <!--ends intro -->

        <br>
       <div class ='row'>

        {% block content %}
        {% if 'query_edit' in request.url %}
        <div style='margin-left: 100px; width: 45%;'>
        <div class="alert alert-info" role="alert">
         <strong>Edit your selected data line here</strong>
        </div>

        {% for eresult in eresults %}

        <form action = "edit" method = "POST">
         <p>Name: <input class="form-control" type = "text" name = "name" style='width: 100%;' value='{{eresult["name"]}}'/></p>
         <p>Phone: <input class="form-control" type = "text" name = "phone" style='width: 100%;' value='{{eresult["phone"]}}' /></p>
         <p>Email: <input class="form-control" type="text" name = "email" style='width: 100%;' value='{{eresult["email"]}}' /></p>
         <p>MessengerId: <input class="form-control" type = "text" name = "messengerid" style='width: 100%;' value='{{eresult["messengerid"]}}' /></p>
         <input type ="hidden" name = "old_name" value='{{eresult["name"]}}' />
         <input type ="hidden" name = "old_email" value='{{eresult["email"]}}' />
         <input type ="hidden" name = "opcode" value='SUBSCRIBER' />	 

         {% endfor %}

         <br>

         <p><input class="btn-primary" type = "submit" value = "Update Data" /></p>
        </form>
        </div>

        {% else %}
        <div style='margin-left: 100px; width: 45%;'>
        <div class="alert alert-info" role="alert">
        <strong>Insert your new data line with this form</strong>
        </div>
        
        <form action = "insert" method = "POST">
         <p>Name: <input class="form-control" type = "text" name = "name" style='width: 100%;' /></p>
         <p>Phone: <input class="form-control" type = "text" name = "phone" style='width: 100%;' /></p>
         <p>Email: <input class="form-control" type = "text" name = "email" style='width: 100%;' /></p>
         <p>Messenger Id: <input class="form-control" type ="text" name = "messengerid" style='width: 100%;' /></p>
         <br>
	 <input type ="hidden" name = "opcode" value='SUBSCRIBER' />
         <p><input class="btn-primary" type = "submit" value = "Insert Data" /></p>
        </form>
        </div>


        {% endif %}
        {% endblock content %}

        <div style='margin-left: 20px; width: 45%;'>
        <div class="alert alert-warning" role="alert">
         <strong>Here is the status of execution</strong>  ...
        </div>
        {{msg}}
        </div>

        </div> <!-- ends row div -->

      <br><br>

        <div class="alert alert-success" role="alert" style='width: 90%; margin-left: 100px;'>
        <strong>Here is your schedule table below</strong>
        </div>

      <table class = 'table table-hover' style = 'margin-left: 100px; margin-right: 100px; width: 90%;'>
         <thead>
           <tr>
            <th>Id</th>	     	     
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Messenger Id</th>
            <th>EDIT</th>
            <th>DELETE</th>
            </tr>
         </thead>

         {% for result in results %}
            <tr>
               <td>{{result["id"]}}</td>
               <td>{{result["name"]}}</td>
               <td>{{result["phone"]}}</td>
               <td>{{result["email"]}}</td>
               <td>{{result['messengerid']}}</td>
               <td align="center"><a href = "{{ url_for('sql_editlink', name=result['name'], email=result['email'], opcode='SUBSCRIBER') }}">Edit</a></td>
               <td align="center"><a href = "{{ url_for('sql_datadelete', name=result['name'], email=result['email'], opcode='SUBSCRIBER') }}">Delete</a></td>
            </tr>
         {% endfor %}
      </table>

    </body>
</html>
